(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[228],{62994:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manage/user/edit/[id]",function(){return t(45353)}])},59951:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var r=t(26042),i=t(85893),o=t(73789),u=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,s=function(e){var n=e.register,t=e.formState.errors,s=e.isPasswordRequired,a=void 0!==s&&s;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Z,(0,r.Z)({placeholder:"E-mail",error:t.email},n("email",{required:"Email is required",pattern:{value:u,message:"Please enter a valid email address"}}))),(0,i.jsx)(o.Z,(0,r.Z)({placeholder:"Password",type:"password",error:t.password},n("password",a?{required:"Password is required",minLength:{value:6,message:"Min length should be more 6 symbols"}}:{})))]})}},36604:function(e,n,t){"use strict";t.d(n,{Z:function(){return _}});var r=t(85893),i=t(77840),o=t.n(i),u=t(89583),s=[{title:"Statistics",link:(0,u.wk)()},{title:"Users",link:(0,u.A7)("users")},{title:"Movies",link:(0,u.A7)("movies")},{title:"Actors",link:(0,u.A7)("actors")},{title:"Genres",link:(0,u.A7)("genres")}],a=t(14924),c=t(11163),l=t(41664),d=t.n(l),f=t(94184),m=t.n(f),p=function(e){var n=e.item,t=n.link,i=n.title,u=(0,c.useRouter)().asPath;return(0,r.jsx)("li",{children:(0,r.jsx)(d(),{href:t,children:(0,r.jsx)("a",{className:m()((0,a.Z)({},o().active,u===t)),children:i})})})},_=function(){return(0,r.jsx)("nav",{className:o().nav,children:(0,r.jsx)("ul",{children:s.map((function(e){return(0,r.jsx)(p,{item:e},e.link)}))})})}},10073:function(e,n,t){"use strict";var r=t(26042),i=t(69396),o=t(99534),u=t(85893),s=t(94184),a=t.n(s),c=t(15262),l=t.n(c);n.Z=function(e){var n=e.children,t=e.className,s=(0,o.Z)(e,["children","className"]);return(0,u.jsx)("button",(0,i.Z)((0,r.Z)({className:a()(l().button,t)},s),{children:n}))}},73789:function(e,n,t){"use strict";var r=t(26042),i=t(99534),o=t(85893),u=t(67294),s=t(94184),a=t.n(s),c=t(15262),l=t.n(c),d=(0,u.forwardRef)((function(e,n){var t=e.placeholder,u=e.error,s=e.type,c=void 0===s?"text":s,d=e.style,f=(0,i.Z)(e,["placeholder","error","type","style"]);return(0,o.jsxs)("div",{className:a()(l().common,l().field),style:d,children:[(0,o.jsxs)("label",{children:[(0,o.jsx)("span",{children:t}),(0,o.jsx)("input",(0,r.Z)({type:c,ref:n},f))]}),u&&(0,o.jsx)("div",{className:l().error,children:u.message})]})}));d.displayName="Field",n.Z=d},62289:function(e,n,t){"use strict";var r=t(85893);n.Z=function(e){var n=e.title,t=e.className;return(0,r.jsx)("h1",{className:"text-white text-opacity-80 font-semibold ".concat((null===t||void 0===t?void 0:t.includes("xl"))?"":"text-3xl"," ").concat(t),children:n})}},48974:function(e,n,t){"use strict";t.d(n,{K:function(){return s}});var r=t(47568),i=t(70655),o=t(84714),u=t(18016),s={getAll:function(e){return(0,r.Z)((function(){var n;return(0,i.__generator)(this,(function(t){return n={},[2,o.ZP.get((0,u.Il)(""),(n.params=e?{searchTerm:e}:{},n))]}))}))()},getProfile:function(){return(0,r.Z)((function(){return(0,i.__generator)(this,(function(e){return[2,o.ZP.get((0,u.Il)("/profile"))]}))}))()},getFavorites:function(){return(0,r.Z)((function(){return(0,i.__generator)(this,(function(e){return[2,o.ZP.get((0,u.Il)("/profile/favorites"))]}))}))()},toggleFavorite:function(e){return(0,r.Z)((function(){var n;return(0,i.__generator)(this,(function(t){return n={},[2,o.ZP.post((0,u.Il)("/profile/favorites"),(n.movieId=e,n))]}))}))()},updateProfile:function(e){return(0,r.Z)((function(){return(0,i.__generator)(this,(function(n){return[2,o.ZP.put((0,u.Il)("/profile"),e)]}))}))()},getById:function(e){return(0,r.Z)((function(){return(0,i.__generator)(this,(function(n){return[2,o.ZP.get((0,u.Il)("/".concat(e)))]}))}))()},update:function(e,n){return(0,r.Z)((function(){return(0,i.__generator)(this,(function(t){return[2,o.ZP.put((0,u.Il)("/".concat(e)),n)]}))}))()},deleteUser:function(e){return(0,r.Z)((function(){return(0,i.__generator)(this,(function(n){return[2,o.ZP.delete((0,u.Il)("/".concat(e)))]}))}))()}}},45495:function(e,n,t){"use strict";t.d(n,{Z:function(){return d}});var r=t(85893),i=t(9008),o=t.n(i),u=t(11163),s="Online cinema",a=function(e){return"".concat(e," | ").concat(s)},c=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=e.replace(/<[^>]+>/g,"").replace(/&[^;]+./g," ").replace(/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g,"");return n&&(t=t.slice(0,n)+"..."),t},l=t(76983),d=function(e){var n=e.title,t=e.description,i=e.image,d=e.children,f=(0,u.useRouter)().asPath,m="".concat("http://localhost:3000").concat(f);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o(),{children:[(0,r.jsx)("title",{itemProp:"headline",children:a(n)}),t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("meta",{itemProp:"description",name:"description",content:c(t,152)}),(0,r.jsx)("link",{rel:"canonical",href:m}),(0,r.jsx)("meta",{property:"og:locale",content:"en"}),(0,r.jsx)("meta",{property:"og:title",content:a(n)}),(0,r.jsx)("meta",{property:"og:url",content:m}),(0,r.jsx)("meta",{property:"og:image",content:i||l.Z}),(0,r.jsx)("meta",{property:"og:site_name",content:s}),(0,r.jsx)("meta",{property:"og:description",content:c(t,197)})]}):(0,r.jsx)("meta",{name:"robots",content:"noindex, nofollow"})]}),d]})}},45353:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return j}});var r=t(85893),i=t(87536),o=t(47568),u=t(70655),s=t(11163),a=t(88767),c=t(48974),l=t(88116),d=t(16938),f=t(89583),m=t(45495),p=t(36604),_=t(62289),h=t(4663),g=t(10073),v=(t(77664),t(59951)),x=function(){var e=(0,i.cI)({mode:"onChange"}),n=e.handleSubmit,t=e.register,x=e.formState,Z=e.setValue,j=e.control,F=function(e){var n=(0,s.useRouter)(),t=n.push,r=n.query,i=String(r.id),m=(0,a.useQuery)(["user",i],(function(){return c.K.getById(i)}),{onSuccess:function(n){var t=n.data;e("email",t.email),e("isAdmin",t.isAdmin)},onError:function(e){(0,l._)(e,"Get users")},enabled:!!r.id}).isLoading,p=(0,a.useMutation)("update users",(function(e){return c.K.update(i,e)}),{onError:function(e){(0,l._)(e,"Update users")},onSuccess:function(){d.Rt.success("Update users","update was successful"),t((0,f.A7)("users"))}}).mutateAsync,_=function(){var e=(0,o.Z)((function(e){return(0,u.__generator)(this,(function(n){switch(n.label){case 0:return[4,p(e)];case 1:return n.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}();return{onSubmit:_,isLoading:m}}(Z),y=F.isLoading,b=F.onSubmit;return(0,r.jsxs)(m.Z,{title:"Edit user",children:[(0,r.jsx)(p.Z,{}),(0,r.jsx)(_.Z,{title:"Edit user"}),(0,r.jsx)("form",{className:"admin-form",onSubmit:n(b),children:y?(0,r.jsx)(h.Z,{count:3}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v.Z,{register:t,formState:x}),(0,r.jsx)(i.Qr,{name:"isAdmin",control:j,render:function(e){var n=e.field;return(0,r.jsx)("button",{onClick:function(e){e.preventDefault(),n.onChange(!n.value)},className:"text-link block mb-7",children:n.value?"Make it regular user":"Make it admin"})}}),(0,r.jsx)(g.Z,{children:"Update"})]})})]})},Z=function(){return(0,r.jsx)(x,{})};Z.isOnlyAdmin=!0;var j=Z},77840:function(e){e.exports={nav:"AdminNavigation_nav__jmpMb",active:"AdminNavigation_active__DYQnj"}},15262:function(e){e.exports={button:"form_button__zzx8l",common:"form_common__5EpHn",field:"form_field__KLTjc",error:"form_error__hunHi",editorWrapper:"form_editorWrapper__lvmGd",wrapper:"form_wrapper__in9Fw",toolbar:"form_toolbar__xTi0C",editor:"form_editor__dPpWP",uploadField:"form_uploadField__mJYFJ",uploadFlex:"form_uploadFlex__qWZSd",uploadImageContainer:"form_uploadImageContainer__yrxr7",fade:"form_fade__r_rtw"}},77664:function(){}},function(e){e.O(0,[536,619,774,888,179],(function(){return n=62994,e(e.s=n);var n}));var n=e.O();_N_E=n}]);
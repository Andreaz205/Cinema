(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[389],{91903:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/favorites",function(){return n(77881)}])},90528:function(t,e,n){"use strict";n.d(e,{r:function(){return i}});var r=n(88767),o=n(48974),i=function(){var t=(0,r.useQuery)("favorite movies",(function(){return o.K.getFavorites()}),{select:function(t){return t.data}});return{isLoading:t.isLoading,favoriteMovies:t.data,refetch:t.refetch}}},606:function(t,e,n){"use strict";var r=n(14924),o=n(85893),i=n(67294),u=n(90528),a=n(88767),c=n(48974),s=n(88116),f=n(94184),l=n.n(f),_=n(85386),d=n.n(_);e.Z=function(t){var e=t.movieId,n=(0,i.useState)(!1),f=n[0],_=n[1],v=(0,u.r)(),p=v.favoriteMovies,m=v.refetch;(0,i.useEffect)((function(){if(p){var t=p.some((function(t){return t._id===e}));f!==t&&_(t)}}),[p,f,e]);var g=(0,a.useMutation)("update favorites",(function(){return c.K.toggleFavorite(e)}),{onError:function(t){(0,s._)(t,"Update favorite list")},onSuccess:function(){_(!f),m()}}).mutateAsync;return(0,o.jsx)("button",{onClick:function(){return g()},className:l()(d().button,(0,r.Z)({},d().animate,f)),style:{backgroundImage:"url(https://i.ibb.co/HzKjmwd/heart-animation.png"}})}},62289:function(t,e,n){"use strict";var r=n(85893);e.Z=function(t){var e=t.title,n=t.className;return(0,r.jsx)("h1",{className:"text-white text-opacity-80 font-semibold ".concat((null===n||void 0===n?void 0:n.includes("xl"))?"":"text-3xl"," ").concat(n),children:e})}},48974:function(t,e,n){"use strict";n.d(e,{K:function(){return a}});var r=n(47568),o=n(70655),i=n(84714),u=n(18016),a={getAll:function(t){return(0,r.Z)((function(){var e;return(0,o.__generator)(this,(function(n){return e={},[2,i.ZP.get((0,u.Il)(""),(e.params=t?{searchTerm:t}:{},e))]}))}))()},getProfile:function(){return(0,r.Z)((function(){return(0,o.__generator)(this,(function(t){return[2,i.ZP.get((0,u.Il)("/profile"))]}))}))()},getFavorites:function(){return(0,r.Z)((function(){return(0,o.__generator)(this,(function(t){return[2,i.ZP.get((0,u.Il)("/profile/favorites"))]}))}))()},toggleFavorite:function(t){return(0,r.Z)((function(){var e;return(0,o.__generator)(this,(function(n){return e={},[2,i.ZP.post((0,u.Il)("/profile/favorites"),(e.movieId=t,e))]}))}))()},updateProfile:function(t){return(0,r.Z)((function(){return(0,o.__generator)(this,(function(e){return[2,i.ZP.put((0,u.Il)("/profile"),t)]}))}))()},getById:function(t){return(0,r.Z)((function(){return(0,o.__generator)(this,(function(e){return[2,i.ZP.get((0,u.Il)("/".concat(t)))]}))}))()},update:function(t,e){return(0,r.Z)((function(){return(0,o.__generator)(this,(function(n){return[2,i.ZP.put((0,u.Il)("/".concat(t)),e)]}))}))()},deleteUser:function(t){return(0,r.Z)((function(){return(0,o.__generator)(this,(function(e){return[2,i.ZP.delete((0,u.Il)("/".concat(t)))]}))}))()}}},45495:function(t,e,n){"use strict";n.d(e,{Z:function(){return l}});var r=n(85893),o=n(9008),i=n.n(o),u=n(11163),a="Online cinema",c=function(t){return"".concat(t," | ").concat(a)},s=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t.replace(/<[^>]+>/g,"").replace(/&[^;]+./g," ").replace(/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g,"");return e&&(n=n.slice(0,e)+"..."),n},f=n(76983),l=function(t){var e=t.title,n=t.description,o=t.image,l=t.children,_=(0,u.useRouter)().asPath,d="".concat("http://localhost:3000").concat(_);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i(),{children:[(0,r.jsx)("title",{itemProp:"headline",children:c(e)}),n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("meta",{itemProp:"description",name:"description",content:s(n,152)}),(0,r.jsx)("link",{rel:"canonical",href:d}),(0,r.jsx)("meta",{property:"og:locale",content:"en"}),(0,r.jsx)("meta",{property:"og:title",content:c(e)}),(0,r.jsx)("meta",{property:"og:url",content:d}),(0,r.jsx)("meta",{property:"og:image",content:o||f.Z}),(0,r.jsx)("meta",{property:"og:site_name",content:a}),(0,r.jsx)("meta",{property:"og:description",content:s(n,197)})]}):(0,r.jsx)("meta",{name:"robots",content:"noindex, nofollow"})]}),l]})}},77881:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return h}});var r=n(85893),o=n(45495),i=n(62289),u=n(48570),a=n.n(u),c=n(90528),s=n(4663),f=n(606),l=n(41664),_=n.n(l),d=n(25675),v=n.n(d),p=n(89583),m=function(t){var e=t.movie;return(0,r.jsxs)("div",{className:a().itemWrapper,children:[(0,r.jsx)(f.Z,{movieId:e._id}),(0,r.jsx)(_(),{href:(0,p.Xl)(e.slug),children:(0,r.jsx)("a",{className:a().item,children:(0,r.jsx)(v(),{alt:e.title,src:e.bigPoster,layout:"fill",draggable:!1,priority:!0})})})]})},g=function(){var t=(0,c.r)(),e=t.favoriteMovies,n=t.isLoading;return(0,r.jsxs)(o.Z,{title:"Favorites",children:[(0,r.jsx)(i.Z,{title:"Favorites"}),(0,r.jsx)("section",{className:a().favorites,children:n?(0,r.jsx)(s.Z,{count:3,className:a().skeletonLoader,containerClassName:a().containerLoader}):null===e||void 0===e?void 0:e.map((function(t){return(0,r.jsx)(m,{movie:t},t._id)}))})]})},h=function(){return(0,r.jsx)(g,{})}},48570:function(t){t.exports={favorites:"Favorites_favorites__jA0hJ",containerLoader:"Favorites_containerLoader__48q7J",skeletonLoader:"Favorites_skeletonLoader__k25df",itemWrapper:"Favorites_itemWrapper__O7aiB",fade:"Favorites_fade__XNhas",item:"Favorites_item__olMgf",title:"Favorites_title__2ucxx"}},85386:function(t){t.exports={button:"FavoriteButton_button__4HnpL",animate:"FavoriteButton_animate__4b8kX","heart-burst":"FavoriteButton_heart-burst__jgos5"}}},function(t){t.O(0,[774,888,179],(function(){return e=91903,t(t.s=e);var e}));var e=t.O();_N_E=e}]);